<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Th√¥ng tin ng∆∞·ªùi d√πng</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f4f7fb;
            --text: #333;
            --card: #ffffff;
            --highlight: #0077cc;
        }

        * {
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            margin: 0;
            padding: 40px;
            background-color: var(--bg);
            color: var(--text);
        }

        .container {
            max-width: 1100px;
            margin: auto;
            padding: 0 15px;
        }

        .breadcrumb {
            font-size: 14px;
            margin-bottom: 20px;
            color: #888;
        }

        .breadcrumb span {
            margin: 0 5px;
        }

        h2 {
            color: var(--highlight);
            font-size: 24px;
            margin-bottom: 16px;
        }

        section {
            background-color: var(--card);
            padding: 25px 30px;
            border-radius: 15px;
            margin-bottom: 40px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e1e5ea;
        }

        .info p {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .info p span {
            font-weight: bold;
            color: var(--highlight);
        }

        .search-filter {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .search-filter input,
        .search-filter select {
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 14px;
        }

        .history table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        thead {
            background: var(--highlight);
            color: white;
        }

        th, td {
            padding: 14px 18px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        tbody tr:hover {
            background-color: #f1f9ff;
            transition: 0.3s;
        }

        .status {
            font-weight: bold;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            display: inline-block;
            cursor: default;
        }

        .status-cho {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-da-xn {
            background-color: #d4edda;
            color: #155724;
        }

        .status-da-huy {
            background-color: #f8d7da;
            color: #721c24;
        }

        .status-khong-ro {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        .pagination {
            margin-top: 30px;
            text-align: center;
        }

        .pagination a {
            margin: 0 6px;
            padding: 6px 12px;
            text-decoration: none;
            border: 1px solid var(--highlight);
            color: var(--highlight);
            border-radius: 6px;
            transition: 0.3s;
        }

        .pagination a:hover,
        .pagination a.current-page {
            background-color: var(--highlight);
            color: white;
        }

        @media (max-width: 768px) {
            .history table {
                display: block;
                overflow-x: auto;
            }

            th, td {
                white-space: nowrap;
            }

            .search-filter {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
<div class="container">

    <div class="breadcrumb">
        üè† <a th:href="@{/ve-trang-chu}" style="color: var(--highlight); text-decoration: none;">Trang ch·ªß</a>
        <span>‚Ä∫</span> Th√¥ng tin ng∆∞·ªùi d√πng
    </div>

    <!-- SECTION: Th√¥ng tin t√†i kho·∫£n -->
    <section>
        <h2>üë§ Th√¥ng tin t√†i kho·∫£n</h2>
        <div class="info">
            <p>H·ªç t√™n: <span th:text="${taiKhoan.ho_ten}">Nguy·ªÖn VƒÉn A</span></p>
            <p>Email: <span th:text="${taiKhoan.email}">a@gmail.com</span></p>
            <p>SƒêT: <span th:text="${taiKhoan.so_dien_thoai}">0123456789</span></p>
            <p>Vai tr√≤: <span th:text="${taiKhoan.vai_tro=='NGUOI_DUNG'?'Ng∆∞·ªùi d√πng':'Qu·∫£n tr·ªã'}">Ng∆∞·ªùi d√πng</span></p>
        </div>
    </section>

    <!-- SECTION: L·ªãch s·ª≠ ƒë·∫∑t s√¢n -->
    <section>
        <h2>üìú L·ªãch s·ª≠ ƒë·∫∑t s√¢n</h2>

        <div class="search-filter">
            <input type="text" placeholder="üîé T√¨m theo t√™n s√¢n..." oninput="filterTable(this.value)">
        </div>

        <div class="history" th:if="${lichSuPage != null and !lichSuPage.empty}">
            <table id="booking-table">
                <thead>
                <tr>
                    <th>STT</th>
                    <th>T√™n s√¢n</th>
                    <th>Ng√†y ƒë·∫∑t</th>
                    <th>Khung gi·ªù</th>
                    <th>Gi√°</th>
                    <th>Ghi ch√∫</th>
                    <th>Tr·∫°ng th√°i</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="lich, iterStat : ${lichSuPage.content}">
                    <td th:text="${iterStat.index + 1 + (lichSuPage.number * lichSuPage.size)}">1</td>
                    <td th:text="${lich.sanBong.ten_san_bong}">S√¢n A</td>
                    <td th:text="${lich.ngayDat.format(dateFormatter)}">01/01/2025</td>
                    <td th:text="${lich.giaTheoKhungGio.khungGio.gioBatDau + ' - ' + lich.giaTheoKhungGio.khungGio.gioKetThuc}">6:00 - 7:00</td>
                    <td th:text="${#numbers.formatDecimal(lich.giaApDung, 0, 'COMMA', 3, 'POINT')} + ' ƒë'"><strong>100.000 ƒë</strong></td>
                    <td th:text="${lich.ghiChu}">Kh√¥ng c√≥</td>
                    <td th:switch="${lich.trangThai}">
                        <span th:case="0" class="status status-cho" title="Ch·ªù x√°c nh·∫≠n">‚è≥</span>
                        <span th:case="1" class="status status-da-xn" title="ƒê√£ x√°c nh·∫≠n">‚úÖ</span>
                        <span th:case="2" class="status status-da-huy" title="ƒê√£ h·ªßy">‚ùå</span>
                        <span th:case="*" class="status status-khong-ro" title="Kh√¥ng r√µ">‚ùî</span>
                    </td>
                </tr>
                </tbody>
            </table>

            <div class="pagination" th:if="${lichSuPage.totalPages > 1}">
                <a th:if="${lichSuPage.hasPrevious()}" th:href="@{/thong-tin-nguoi-dung(page=${lichSuPage.number - 1})}">&laquo; Tr∆∞·ªõc</a>
                <span th:each="i : ${#numbers.sequence(0, lichSuPage.totalPages - 1)}">
          <a th:href="@{/thong-tin-nguoi-dung(page=${i})}" th:text="${i + 1}" th:classappend="${i == lichSuPage.number} ? 'current-page' : ''">1</a>
        </span>
                <a th:if="${lichSuPage.hasNext()}" th:href="@{/thong-tin-nguoi-dung(page=${lichSuPage.number + 1})}">Sau &raquo;</a>
            </div>
        </div>

        <div class="history" th:if="${lichSuPage == null or lichSuPage.empty}">
            <p style="color: #888; font-style: italic;">B·∫°n ch∆∞a c√≥ l·ªãch s·ª≠ ƒë·∫∑t s√¢n n√†o.</p>
        </div>
    </section>
</div>

<script>
    function filterTable(keyword) {
        const rows = document.querySelectorAll('#booking-table tbody tr');
        rows.forEach(row => {
            const name = row.children[1].textContent.toLowerCase();
            row.style.display = name.includes(keyword.toLowerCase()) ? '' : 'none';
        });
    }

    function filterStatus(status) {
        const rows = document.querySelectorAll('#booking-table tbody tr');
        rows.forEach(row => {
            const statusText = row.children[6].title;
            row.style.display = !status || statusText === status ? '' : 'none';
        });
    }
</script>
</body>
</html>
